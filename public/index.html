<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>Meu primeiro Jogo Multiplayer</title>
    <style>
        canvas.screen {
            border: 1px solid #CCC;
            width: 500px;
            height: 500px;

            image-rendering: pixelated;
            image-rendering: crisp-edges;
            image-rendering: -moz-crisp-edges;
        }
    </style>

</head>

<body>
<canvas id="canvas2D" class="screen" width="10" height="10"></canvas>

</body>
<script src="/socket.io/socket.io.js"></script>
<script type="module">

    import GameClient from "./gameClient.js"
    import GameScreen from './screen.js'
    import KeyBoardInput from "./inputs.js"
    import ClientNetworking from "./clientNetworking.js";

    const canvasId = 'canvas2D'

    const canvas = document.getElementById(canvasId)


    const gameClientID = 'gameClient-0'

    const networkingID = 'networking-0'

    let gameScreen = new GameScreen(canvas)

    let keyBoardInput = new KeyBoardInput()

    let gameClient = new GameClient(gameClientID)

    let networking = new ClientNetworking(networkingID)


    // game Client subscribes
    gameClient.observable.subscribe(networkingID, networking.observers.observer.bind(networking.observers))
    gameClient.observable.subscribe(canvasId, gameScreen.observers.observer.bind(gameScreen.observers))

    // networking subscribes
    networking.observable.subscribe(gameClientID, gameClient.observers.observer.bind(gameClient.observers))


    // keyboard subscribes
    keyBoardInput.observable.subscribe(gameClientID, gameClient.observers.observer.bind(gameClient.observers))


</script>

</html>